{"version":3,"sources":["redux/cursorSlice.tsx","redux/baselineSlice.tsx","components/Viewer.tsx","python/salsasource.py","App.tsx","reportWebVitals.ts","redux/store.tsx","index.tsx"],"names":["cursorSlice","createSlice","name","initialState","position","drag","reducers","setPosition","state","action","payload","setDrag","actions","baselineSlice","dataPoints","fitValues","setDataPoints","setFitValues","HC_exporting","Highcharts","require","Viewer","memo","props","selectionFunction","xdisplayUnit","dispatch","useDispatch","useSelector","cursor","isSelecting","baselineFit","baseline","isBaselineFitted","length","chartComponentRef","useRef","chart","current","gaussianGuess","setGaussianGuess","gaussianData","getGaussianFit","fileName","dataSource","unit","setUnit","useState","rectangles","setRectangles","showSubtraction","setShowSubtraction","e","console","log","options","series","forEach","allowPointSelect","points","point","x","xAxis","min","max","y","yAxis","select","data","getSelectedPoints","map","xmin","xmax","ymin","ymax","xminpix","toPixels","xmaxpix","yminpix","ymaxpix","width","height","rectangle","renderer","rect","attr","add","zoomType","tooltip","enabled","plotOptions","enableMouseTracking","followPointer","sourceData","xdata","axisdata","toJs","ydata","rawdata","header","xdataArray","slice","call","xi","i","baselineData","item","subtractedData","idx","type","findNearestPointBy","lineWidth","push","colorIndex","gaussian","subtitle","get","toFixed","title","text","renderTo","container","events","selection","click","undefined","render","highcharts","ref","containerProps","onMouseMove","event","xPos","yPos","pointer","normalize","chartX","plotLeft","chartY","plotTop","chartWidth","chartHeight","toValue","getCursorPos","Toolbar","baselinePoints","order","setOrder","isFitting","setIsFitting","fitBaseline","result","fit_baseline","style","display","icon","small","active","onClick","disabled","value","onValueChange","marginLeft","label","inline","minimal","onChange","target","pyodideInstance","a","window","loadPyodide","indexURL","pyodide","loadPackage","runScript","code","runPythonAsync","content","globals","CursorInforPanel","textAlign","BaselinePointTable","overflow","numRows","enableGhostCells","cellRenderer","rowIndex","GaussianGuessTable","columnWidths","App","pyodideObj","pyodideLoaded","setPyodideLoaded","newFileName","setNewfileName","setGaussianData","useEffect","init","setDataSource","getData","file","fetch","salsaSourceDef","script","className","align","Alignment","LEFT","htmlFor","id","hidden","reader","FileReader","onabort","onerror","onload","jsarray","Float32Array","readAsArrayBuffer","readFile","files","nGaussian","fit_gaussian","flex","panel","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","store","configureStore","reducer","cursorReducer","baselineReducer","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.614d8e72.chunk.js","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nexport interface CursorState {\n  position: number[]\n  drag: string\n}\n\nconst initialState: CursorState = {\n  position: [0, 0],\n  drag: \"zoom\"\n}\n\nexport const cursorSlice = createSlice({\n  name: 'cursor',\n  initialState,\n  reducers: {\n    setPosition: (state, action: PayloadAction<number[]>) => {\n      state.position = action.payload\n    },\n    setDrag: (state, action: PayloadAction<string>) => {\n      state.drag = action.payload\n    },\n  },\n})\n\n// Action creators are generated for each case reducer function\nexport const { setPosition, setDrag } = cursorSlice.actions\n\nexport default cursorSlice.reducer","import { createSlice, PayloadAction } from '@reduxjs/toolkit'\n\nexport interface BaselineState {\n  dataPoints: number[][]\n  fitValues: number[]\n}\n\nconst initialState: BaselineState = {\n  dataPoints: [],\n  fitValues: []\n}\n\nexport const baselineSlice = createSlice({\n  name: 'baseline',\n  initialState,\n  reducers: {\n    setDataPoints: (state, action: PayloadAction<number[][]>) => {\n      state.dataPoints = action.payload\n    },\n    setFitValues: (state, action: PayloadAction<number[]>) => {\n      state.fitValues = action.payload\n    },\n  },\n})\n\n// Action creators are generated for each case reducer function\nexport const { setDataPoints, setFitValues } = baselineSlice.actions\n\nexport default baselineSlice.reducer","import { useRef, useState, memo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux'\nimport { RootState } from '../redux/store';\nimport { setDrag, setPosition } from '../redux/cursorSlice';\nimport { setDataPoints, setFitValues } from '../redux/baselineSlice';\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official';\nimport HC_exporting from 'highcharts/modules/exporting';\nimport { Button, ButtonGroup, Divider, FormGroup, HTMLSelect, NumericInput, Popover } from '@blueprintjs/core';\n\nHC_exporting(Highcharts);\nrequire(\"highcharts/modules/draggable-points\")(Highcharts);\n\n\nconst Viewer = memo((props: any) => {\n\n  const dispatch = useDispatch();\n  const drag = useSelector((state: RootState) => state.cursor.drag);\n  const isSelecting = drag === \"baseline\" || drag === \"gaussian\";\n\n  const baselineFit = useSelector((state: RootState) => state.baseline.fitValues);\n  const isBaselineFitted = baselineFit.length > 0;\n\n  const chartComponentRef = useRef<HighchartsReact.RefObject>(null);\n  const chart = chartComponentRef.current?.chart;\n\n  const gaussianGuess = props.gaussianGuess;\n  const setGaussianGuess = props.setGaussianGuess;\n\n  const gaussianData = props.gaussianData;\n  const getGaussianFit = props.getGaussianFit;\n\n  const fileName = props.fileName;\n  const dataSource = props.dataSource;\n  const unit = props.unit;\n  const setUnit = props.setUnit;\n\n  const [rectangles, setRectangles] = useState<any[]>([]);\n  const [showSubtraction, setShowSubtraction] = useState(false);\n\n  const selectPoints = (e: any) => {\n\n    // const chart = chartComponentRef.current?.chart;\n\n    console.log(e)\n    console.log(chart)\n    console.log(\"chart option\", chart?.options)\n\n    if (chart?.series) {\n      chart.series.forEach(\n        (series: any) => {\n          // check the series is selectable, don't select the points on fitting line\n          if (series.options.allowPointSelect === true) {\n            series?.points.forEach(\n              (point: any) => {\n                if (point.x >= e.xAxis[0].min && point.x <= e.xAxis[0].max &&\n                  point.y >= e.yAxis[0].min && point.y <= e.yAxis[0].max) {\n                  point.select(true, true);\n                }\n              }\n            )\n          }\n        }\n      )\n    }\n\n    const data = chart?.getSelectedPoints().map(\n      (point) => { return [point.x || 0.0, point.y || 0.0] }\n    ) || [];\n\n    dispatch(setDataPoints(data));\n\n    // Fire a custom event\n    // console.log(\"highchart\", Highcharts);\n    // Highcharts.fireEvent(chart, 'selectedpoints', { points: chart?.getSelectedPoints() });\n\n    return false; // Don't zoom\n  }\n\n  const selectRange = (e: any) => {\n\n    // const chart = chartComponentRef.current?.chart;\n\n    // console.log(e)\n    // console.log(chart)\n    // console.log(\"chart option\", chart?.options)\n\n    const xmin = e.xAxis[0].min;\n    const xmax = e.xAxis[0].max;\n    const ymin = e.yAxis[0].min;\n    const ymax = e.yAxis[0].max;\n\n    const xminpix = chart?.xAxis[0].toPixels(xmin, false) || 0;\n    const xmaxpix = chart?.xAxis[0].toPixels(xmax, false) || 0;\n    const yminpix = chart?.yAxis[0].toPixels(ymin, false) || 0;\n    const ymaxpix = chart?.yAxis[0].toPixels(ymax, false) || 0;\n    const width = xmaxpix - xminpix;\n    const height = yminpix - ymaxpix;\n\n    console.log(\"rect params\", xminpix, ymaxpix, width, height)\n\n    const rectangle = chart?.renderer.rect(xminpix, ymaxpix, width, height, 2)\n      .attr({\n        \"stroke-width\": 2,\n        \"stroke\": 'red',\n        \"fill\": 'black',\n        \"fill-opacity\": 0.1,\n        \"zIndex\": 3\n      })\n      .add();\n\n    setGaussianGuess([...gaussianGuess, [xmin, xmax, ymin, ymax]]);\n    setRectangles([...rectangles, rectangle]);\n\n    // Fire a custom event\n    // console.log(\"highchart\", Highcharts);\n    // Highcharts.fireEvent(chart, 'selectedpoints', { points: chart?.getSelectedPoints() });\n\n    return false; // Don't zoom\n  }\n\n  let selectionFunction;\n  if (drag === \"baseline\") {\n    selectionFunction = selectPoints;\n  }\n  else if (drag === \"gaussian\") {\n    selectionFunction = selectRange;\n  }\n\n  function unselectByClick() {\n    const points = chart?.getSelectedPoints();\n    if (points?.length && points.length > 0) {\n      points.forEach((point) => {\n        point.select(false);\n      })\n    }\n    dispatch(setDataPoints([]));\n  }\n\n  // const setCursorX = props.setCursorX;\n  // const setCursorY = props.setCursorY;\n\n  // const addBaselinePoints = (point: Array<number>) => {\n  //   setBaselinePoints([...baselinePoints, point]);\n  // };\n\n  // TODO: update table when drag and drop\n  // const updateBaselinePoints = (oldPoint: Array<number>, newPoint: Array<number>) => {\n  //   // console.log(\"update\", oldPoint, newPoint);\n  //   // const test = baselinePoints.map((x, i) => [i, x]);\n  //   // console.log(\"test\", test)\n  //   // const targetIdx = baselinePoints.filter((ele) => {\n  //   //   console.log(\"filter\", ele)\n  //   //   return ele[0] === oldPoint[0] && ele[1] === oldPoint[1]\n  //   // });\n  //   // console.log(\"idx:\", targetIdx);\n  //   console.log(\"a\", baselinePoints);\n  //   setBaselinePoints([...baselinePoints]);\n  //   console.log(\"b\", baselinePoints);\n  //   // setBaselinePoints(baselinePoints[baselinePoints.map((x, i) => [i, x]).filter(\n  //   //   x => x[1] == point)[0][0]] = point);\n  // }\n\n  let xdisplayUnit;\n\n  if (unit === \"freq-k\") {\n    xdisplayUnit = \"kHz\";\n  } else if (unit === \"freq-m\") {\n    xdisplayUnit = \"MHz\";\n  } else if (unit === \"freq-g\") {\n    xdisplayUnit = \"GHz\";\n  } else if (unit === \"chan\") {\n    xdisplayUnit = \"Channel\";\n  } else if (unit === \"vel\") {\n    xdisplayUnit = \"Velocity (km/s)\";\n  } else {\n    xdisplayUnit = \"Hz\";\n  }\n\n  const options: Highcharts.Options = {\n    chart: {\n      zoomType: 'x',\n    },\n    tooltip: {\n      enabled: true\n    },\n    plotOptions: {\n      series: {\n        enableMouseTracking: true,\n        tooltip: {\n          followPointer: false,\n        },\n      },\n    },\n  };\n\n  let sourceData: number[][] = [];\n\n  if (dataSource) {\n\n    const xdata = dataSource.axisdata(1, unit).toJs();\n    const ydata = dataSource.rawdata.toJs()[0][0];\n    const header = dataSource.header.toJs();\n\n    const xdataArray = [].slice.call(xdata);\n    sourceData = xdataArray.map((xi: number, i: number) => {\n      return [xi, ydata[i]];\n    });\n\n    // create dummy baseline array and updated the value if fitting has done\n    const baselineData = xdataArray.map((xi: number, i: number) => {\n      return [xi, 0.0];\n    });\n\n    if (isBaselineFitted === true) {\n      baselineData.forEach((item: number[], i: number) => {\n        item[1] = baselineFit[i];\n      });\n    }\n\n    // create subtracted data if the option is selected\n    if (showSubtraction === true) {\n      const subtractedData = sourceData.map(\n        (item: number[], idx: number) => {\n          return [item[0], item[1] - baselineData[idx][1]]\n        }\n      )\n      options.series = [\n        {\n          name: 'Observation - Baseline',\n          type: 'scatter',\n          data: subtractedData,\n          findNearestPointBy: 'xy',\n        },\n      ];\n    }\n    else {\n      options.series = [\n        {\n          name: 'Observation',\n          type: 'scatter',\n          lineWidth: 2,\n          data: sourceData,\n          allowPointSelect: isSelecting,\n          findNearestPointBy: 'xy',\n        },\n        // {\n        //   name: \"Baseline\",\n        //   type: \"scatter\",\n        //   data: props.baselinePoints,\n        //   dragDrop: {\n        //     draggableX: true,\n        //     draggableY: true\n        //   },\n        // },\n      ];\n\n      // add another label if we plot both original data and baseline\n      if (isBaselineFitted === true) {\n        options.series.push({\n          name: 'Baseline fitting',\n          type: 'line',\n          data: baselineData,\n          allowPointSelect: false,\n          colorIndex: 3,\n        })\n      }\n      console.log(\"series\", options.series);\n    }\n\n    if (gaussianData) {\n      const gaussian = xdataArray.map((xi: number, i: number) => {\n        return [xi, 0.0];\n      });\n      gaussian.forEach((item: number[], i: number) => {\n        item[1] = gaussianData[i];\n      });\n      options.series.push(\n        {\n          name: 'Gaussian',\n          type: 'line',\n          data: gaussian,\n          findNearestPointBy: 'xy',\n          colorIndex: 5,\n        },\n      );\n    }\n\n    // options.series = [\n    //   {\n    //     name: \"Observation\",\n    //     type: 'line',\n    //     data: sourceData,\n    //     allowPointSelect: selectMode,\n    //   },\n    //   {\n    //     name: \"Baseline\",\n    //     type: \"scatter\",\n    //     data: baselinePoints,\n    //     dragDrop: {\n    //       draggableX: true,\n    //       draggableY: true\n    //     },\n    //   }\n    // ];\n\n    const subtitle = `${header.get(\"CTYPE2\")}: ${header.get(\"CRVAL2\").toFixed(6)}, ${header.get(\"CTYPE3\")}: ${header.get(\"CRVAL3\").toFixed(6)}`;\n\n    options.title = {\n      text: fileName\n    };\n\n    options.subtitle = {\n      text: subtitle\n    };\n\n    const xAxis = {\n      title: {\n        text: xdisplayUnit,\n      },\n      // labels: {\n      //   format: '{value:.2f}',\n      // }\n    };\n    const yAxis = {\n      title: {\n        text: header.get('BUNIT'),\n      }\n    };\n\n    options.xAxis = xAxis;\n    options.yAxis = yAxis;\n\n  }\n\n  if (isSelecting === true && options.chart) {\n    options.chart.zoomType = 'xy';\n    options.chart.renderTo = chart?.container;\n    options.chart.events = {\n      selection: selectionFunction,\n      click: unselectByClick,\n    };\n  }\n  else if (options.chart) {\n    options.chart.zoomType = 'x';\n    options.chart.events = {\n      selection: undefined,\n      click: undefined,\n      render: undefined,\n    }\n  }\n\n  console.log(\"options\", options)\n\n  const getCursorPos = (event: any) => {\n    let xPos = 0.0;\n    let yPos = 0.0;\n    if (chart) {\n      const e = chart.pointer.normalize(event);\n      const x = e.chartX - chart.plotLeft;\n      const y = e.chartY - chart.plotTop;\n      // const top = chart.container.offsetTop;\n      // const left = chart.container.offsetLeft;\n      // const x = event.clientX - chart.plotLeft - left;\n      // const y = event.clientY - chart.plotTop - top;\n      if (x >= 0 && y >= 0 && x <= chart.chartWidth && y <= chart.chartHeight) {\n        // console.log(chart.xAxis[0].toValue(x, true));\n        // console.log(chart.yAxis[0].toValue(chart.plotHeight - y, true));\n        // setCursorX(chart.xAxis[0].toValue(x, true));\n        // setCursorY(chart.yAxis[0].toValue(y, true));\n        xPos = chart.xAxis[0].toValue(x, true);\n        yPos = chart.yAxis[0].toValue(y, true);\n      }\n      // console.log(event);\n    }\n    // console.log(event);\n    return { xPos, yPos };\n  }\n\n  const handleMouseMove = (event: any) => {\n    const { xPos, yPos } = getCursorPos(event);\n    dispatch(setPosition([xPos, yPos]));\n    // setCursorX(xPos);\n    // setCursorY(yPos);\n  };\n\n  return (\n    <div>\n      <HighchartsReact\n        highcharts={Highcharts}\n        options={options}\n        ref={chartComponentRef}\n        containerProps={{\n          onMouseMove: handleMouseMove,\n          // onDoubleClick: handleDoubleClick,\n        }}\n      />\n      <Toolbar\n        unit={unit}\n        setUnit={setUnit}\n        dataSource={dataSource}\n        showSubtraction={showSubtraction}\n        setShowSubtraction={setShowSubtraction}\n        getGaussianFit={getGaussianFit}\n      />\n    </div>\n  );\n});\n\nconst Toolbar = (props: any) => {\n  const dispatch = useDispatch();\n  const drag = useSelector((state: RootState) => state.cursor.drag);\n  const baselinePoints = useSelector((state: RootState) => state.baseline.dataPoints);\n  const baselineFit = useSelector((state: RootState) => state.baseline.fitValues);\n  const isBaselineFitted = baselineFit.length > 0;\n  const xdata = baselinePoints.map((item: number[]) => { return item[0] });\n  const ydata = baselinePoints.map((item: number[]) => { return item[1] });\n\n  const dataSource = props.dataSource;\n  const showSubtraction = props.showSubtraction;\n  const setShowSubtraction = props.setShowSubtraction;\n  const getGaussianFit = props.getGaussianFit;\n  const unit = props.unit;\n  const setUnit = props.setUnit;\n  const [order, setOrder] = useState(0);\n  const [isFitting, setIsFitting] = useState(false);\n\n  const fitBaseline = (x: number[], y: number[]) => {\n    const result = dataSource?.fit_baseline(x, y, unit).toJs();\n    const baselineFit = [].slice.call(result);\n    dispatch(setFitValues(baselineFit));\n  }\n\n  return (\n    <div style={{ display: \"flex\" }}>\n      <ButtonGroup>\n        <Button\n          icon=\"zoom-in\"\n          small={true}\n          active={drag === \"zoom\"}\n          onClick={() => { dispatch(setDrag(\"zoom\")) }}\n        />\n        <Button\n          icon=\"widget-button\"\n          small={true}\n          active={drag === \"baseline\"}\n          disabled={showSubtraction}\n          onClick={() => { dispatch(setDrag(\"baseline\")) }}\n        />\n        <Button\n          icon=\"widget\"\n          small={true}\n          active={drag === \"gaussian\"}\n          disabled={!isBaselineFitted || !showSubtraction}\n          onClick={() => { dispatch(setDrag(\"gaussian\")) }}\n        />\n      </ButtonGroup>\n      <Divider />\n      <Button\n        icon=\"bring-data\"\n        small={true}\n        active={showSubtraction}\n        onClick={() => {\n          setShowSubtraction(!showSubtraction)\n          dispatch(setDrag(\"zoom\"))\n        }}\n      />\n      <Button\n        icon=\"regression-chart\"\n        small={true}\n        disabled={!baselinePoints.length}\n        onClick={() => { fitBaseline(xdata, ydata) }}\n      />\n      <Button\n        icon=\"delete\"\n        small={true}\n        onClick={() => {\n          dispatch(setDataPoints([]));\n          fitBaseline([], []);\n        }}\n      />\n      <Divider />\n      <Button\n        icon=\"step-chart\"\n        small={true}\n        active={isFitting}\n        onClick={() => {\n          if (isFitting) {\n            getGaussianFit(0);\n          }\n          else {\n            getGaussianFit(order);\n          }\n          setIsFitting(!isFitting);\n        }}\n      />\n      <Popover>\n        <Button text={order} small={true} />\n        <NumericInput\n          style={{ width: 30 }}\n          value={order}\n          min={1}\n          onValueChange={(value) => {\n            setOrder(value);\n            if (isFitting) getGaussianFit(value);\n          }}\n        />\n      </Popover>\n      <FormGroup style={{ marginLeft: \"auto\", height: 10 }} label=\"x-axis unit:\" inline={true}>\n        <HTMLSelect value={unit} minimal={true} onChange={(e) => { setUnit(e.target.value) }}>\n          <option value=\"freq\">Frequency (Hz)</option>\n          <option value=\"freq-k\">Frequency (kHz)</option>\n          <option value=\"freq-m\">Frequency (MHz)</option>\n          <option value=\"freq-g\">Frequency (GHz)</option>\n          <option value=\"chan\">Channel</option>\n          <option value=\"vel\">Velocity (km/s)</option>\n        </HTMLSelect>\n      </FormGroup>\n    </div>\n  )\n}\n\nexport default Viewer;","export default __webpack_public_path__ + \"static/media/salsasource.09b19ac8.py\";","import { useState, useEffect, useRef } from 'react';\nimport { Alignment, Button, Card, Icon, Label, Navbar, NavbarDivider, NavbarGroup, NavbarHeading, Tabs, Tab } from '@blueprintjs/core';\nimport { Cell, Column, Table2 } from \"@blueprintjs/table\";\nimport Viewer from './components/Viewer';\nimport salsaSourceDef from './python/salsasource.py';\nimport { useSelector, useDispatch } from 'react-redux'\nimport { RootState } from './redux/store'\n\nimport './App.css';\n\ndeclare global { // <- [reference](https://stackoverflow.com/a/56458070/11542903)\n  interface Window {\n    pyodide: any;\n    jsarray: any;\n    loadPyodide: any;\n    // languagePluginLoader: any;\n  }\n}\n\nconst pyodideInstance = async () => {\n  const pyodide = await window.loadPyodide({\n    indexURL: \"https://cdn.jsdelivr.net/pyodide/v0.18.1/full/\"\n  });\n  await pyodide.loadPackage([\"astropy\", \"scipy\"])\n  // await pyodide.loadPackage(\"astropy\")\n  return pyodide\n}\n\nconst runScript = async (pyodide: any, code: string) => {\n  await pyodide.runPythonAsync(code)\n  const content = pyodide.globals.get(\"salsa\")\n  console.log(\"globals\", content)\n\n  return content\n}\n\nfunction App() {\n  const dispatch = useDispatch();\n  const pyodideObj = useRef<any>(null);\n  const [pyodideLoaded, setPyodideLoaded] = useState(false);\n  const [newFileName, setNewfileName] = useState(\"\");\n  const [unit, setUnit] = useState(\"freq\");\n\n  const [gaussianGuess, setGaussianGuess] = useState<number[][]>([]);\n  const [gaussianData, setGaussianData] = useState<number[]>([]);\n\n  useEffect(() => {\n    async function init() {\n      if (!pyodideLoaded) {\n        pyodideObj.current = await pyodideInstance();\n        setPyodideLoaded(true)\n      } else {\n        console.log(\"no duplicate reload to avoid pyodide error\")\n      }\n    }\n    init()\n  });\n\n  const [dataSource, setDataSource] = useState<any>();\n\n  const getData = async (file: File) => {\n    const script = await (await fetch(salsaSourceDef)).text();\n    // console.log(\"script text\", scriptText)\n    const content = await runScript(pyodideObj.current, script);\n    // console.log(\"content\", content)\n    // console.log(\"header\", content.header.toJs())\n    // const xdata = content.axisdata(1).toJs()\n    // const ydata = content.rawdata.toJs()[0][0]\n\n    setNewfileName(file.name);\n    setDataSource(content);\n  }\n\n  const readFile = (file: File) => {\n    if (file) {\n      console.log(\"processing file:\", file)\n      const reader = new FileReader()\n\n      reader.onabort = () => console.log('file reading was aborted')\n      reader.onerror = () => console.log('file reading has failed')\n      reader.onload = () => {\n        // Do whatever you want with the file contents\n        window.jsarray = new Float32Array(reader.result as ArrayBuffer);\n        getData(file);\n      }\n      reader.readAsArrayBuffer(file)\n    }\n  }\n\n  const getGaussianFit = (nGaussian: number) => {\n    const result = dataSource?.fit_gaussian(unit, nGaussian, gaussianGuess).toJs();\n    setGaussianData(result);\n  }\n\n  return (\n    <div className=\"App\">\n      <Navbar>\n        <NavbarGroup align={Alignment.LEFT}>\n          <NavbarHeading>SalsaTS</NavbarHeading>\n          <NavbarDivider />\n          <Button disabled={!pyodideLoaded}>\n            <label htmlFor=\"input\">\n              <input type=\"file\" id=\"input\" hidden onChange={(e: any) => { readFile(e.target.files[0]) }} />\n              <Icon icon=\"document\" /> Upload\n            </label>\n          </Button>\n        </NavbarGroup>\n      </Navbar>\n      <Viewer\n        fileName={newFileName}\n        dataSource={dataSource}\n        unit={unit}\n        setUnit={setUnit}\n        gaussianGuess={gaussianGuess}\n        setGaussianGuess={setGaussianGuess}\n        gaussianData={gaussianData}\n        getGaussianFit={getGaussianFit}\n      />\n      <div style={{ display: \"flex\" }}>\n        <div style={{ flex: 1 }}>\n          <Tabs>\n            <Tab\n              id=\"cursorpanel\"\n              title=\"Cursor Information\"\n              panel={\n                <CursorInforPanel />\n              }\n            />\n            <Tab\n              id=\"baselinepoints\"\n              title=\"Selected Baseline Points\"\n              panel={\n                <BaselinePointTable />\n              }\n            />\n            <Tab\n              id=\"gaussianranges\"\n              title=\"Selected Gaussian Ranges\"\n              panel={\n                <GaussianGuessTable\n                  gaussianGuess={gaussianGuess}\n                />\n              }\n            />\n          </Tabs>\n        </div>\n      </div>\n    </div >\n  );\n}\n\nconst CursorInforPanel = (props: any) => {\n\n  const position = useSelector((state: RootState) => state.cursor.position);\n  return (\n    <div style={{ textAlign: 'left' }}>\n      <Label>Position: ({position[0].toFixed(6)}, {position[1].toFixed(6)})</Label>\n    </div>\n  )\n}\n\n\nconst BaselinePointTable = (props: any) => {\n  const baselinePoints = useSelector((state: RootState) => state.baseline.dataPoints)\n  const pointX = (rowIndex: number) => (\n    <Cell>{`${baselinePoints[rowIndex] ? (baselinePoints[rowIndex][0]).toFixed(6) : 0.0}`}</Cell>\n  );\n  const pointY = (rowIndex: number) => (\n    <Cell>{`${baselinePoints[rowIndex] ? (baselinePoints[rowIndex][1]).toFixed(6) : 0.0}`}</Cell>\n  );\n  return (\n    <Card style={{ display: \"block\", overflow: \"auto\", width: 600, height: 150 }}>\n      <Table2 numRows={baselinePoints.length} enableGhostCells={true}>\n        <Column name=\"X coordinate\" cellRenderer={pointX} />\n        <Column name=\"Y coordinate\" cellRenderer={pointY} />\n      </Table2>\n    </Card>\n  )\n}\n\nconst GaussianGuessTable = (props: any) => {\n  const gaussianGuess = props.gaussianGuess;\n\n  const rangeX = (rowIndex: number) => (\n    <Cell>\n      ({`${gaussianGuess[rowIndex] ? (gaussianGuess[rowIndex][0]).toFixed(6) : 0.0}`},\n      {`${gaussianGuess[rowIndex] ? (gaussianGuess[rowIndex][1]).toFixed(6) : 0.0}`})\n    </Cell>\n  );\n  const rangeY = (rowIndex: number) => (\n    <Cell>\n      ({`${gaussianGuess[rowIndex] ? (gaussianGuess[rowIndex][2]).toFixed(6) : 0.0}`},\n      {`${gaussianGuess[rowIndex] ? (gaussianGuess[rowIndex][3]).toFixed(6) : 0.0}`})\n    </Cell>\n  );\n  return (\n    <Card style={{ display: \"block\", overflow: \"auto\", width: 600, height: 150 }}>\n      <Table2 numRows={gaussianGuess.length} enableGhostCells={true} columnWidths={[300, 200]}>\n        <Column name=\"X range\" cellRenderer={rangeX} />\n        <Column name=\"Y range\" cellRenderer={rangeY} />\n      </Table2>\n    </Card>\n  )\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from '@reduxjs/toolkit'\nimport cursorReducer from './cursorSlice'\nimport baselineReducer from './baselineSlice'\n\nexport const store = configureStore({\n  reducer: {\n    cursor: cursorReducer,\n    baseline: baselineReducer\n  },\n})\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof store.getState>\n// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}\nexport type AppDispatch = typeof store.dispatch","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux'\nimport { store } from './redux/store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}